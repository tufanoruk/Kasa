# Kasa Backup

Kasa Backup is a secure backup and restore utility. Files are encrypted before being sent to the backup system and stay encrypted. Decryption is also performed locally for restored files. So even if the network or the backup site is compromised, your files cannot be read, unless you provide your key. **Keep your key safe and secure, and don't lose it**. There is no way to recover your files if you forget/lost your key.

Kasa can backup to a local/networked file system or Amazon Simple Storage Service (S3), provided that you have an AmazonS3 account.

Only files that are changed from the last backup are processed.

This is a CLI tool. You can easily define backup jobs in your job scheduling system. Sample jobs are also provided.

## Dependencies

You need the following software to run the Kasa backup utility.

- Python 2.7
- PyCrypto for crypto functionality
- boto for AmazonS3 operations.

## Usage

Kasa Backup is a stand-alone utility that is composed of a configuration utility to provide a backup source, destination, crypto method, key, etc. and a backup engine that performs backups with given parameters and backup engine.

First, you need to initialize Kasa using `bin/kasaconfig` utility. When you run the configuration utility it will create `~/.kasa/config` file and ask for required configuration parameres like a key, S3 storage tokens, etc. Configuraiton file is in ".ini" format.
The encryption key is generated by the kasaconfig utility from a non-empty, preferably reasonable size, the file you provide during configuration.

A sample config file is below.

```ini
[kasa]
debug=ERROR

[key]
cryptKey = ******************
s3Code = ******************
s3Key = ****************
```

`bin/kasastore` backups file / directories to a local or S3 storage. Source and destinations are provided in URI format. A sample command is below.

```bash
$ kasastore -s file:///Storage/Documents \
            -d s3:///docs.kasa.sample.domain/Documents >> ./kasa.log 2>&1
```

`bin/kasarestore`restores files / directories. A sampla command is below

```bash
$ kasarestore -s s3:///docs.kasa.sample.domain/Documents \
              -d file:///Documents/RestoredDocuments >> ./kasa.log 2>&1
```
